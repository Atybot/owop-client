<!DOCTYPE html>
<html>
  <head>
    <title>World of Pixels</title>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <style>
      @keyframes fade {
        from {opacity: 1}
        to {opacity: 0}
      }
      
      html, body {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
        overflow: hidden;
        background-image: url(unloaded.png);
      }
      
      .noselect {
        -webkit-touch-callout: none; /* iOS Safari */
          -webkit-user-select: none; /* Chrome/Safari/Opera */
           -khtml-user-select: none; /* Konqueror */
             -moz-user-select: none; /* Firefox */
              -ms-user-select: none; /* Internet Explorer/Edge */
                  user-select: none; /* Non-prefixed version, currently
                                        not supported by any browser */
      }
      
      #viewport {
        position: relative;
        image-rendering: auto;
        image-rendering: crisp-edges;
        image-rendering: pixelated;
        /*transition: all .1s linear;*/
      }
      
      #chunks > canvas {
        position: absolute;
      }
      
      #fx {
        pointer-events: none;
      }
      #fx > div {
        position: absolute;
      }
      .fx0 {
        left: -0.0625px;
        top: -0.0625px;
        width: 0.75px;
        height: 0.75px;
        border-width: 0.1875px;
        border-style: solid;
      }
      .fx1 {
        width: 1px;
        height: 1px;
        border-width: 0.125px;
        border-style: solid;
        box-sizing: border-box;
        animation: fade 1s;
        opacity: 0;
      }
      .fx2 {
        width: 16px;
        height: 16px;
        border: 0.2px solid #FFF;
        box-sizing: border-box;
      }
      .fx3 {
        width: 16px;
        height: 16px;
        border: 0.2px solid #000;
        box-sizing: border-box;
        animation: fade 1s;
        opacity: 0;
      }
      
      #cursors {
        zoom: 6.25%;
      }
      .cursor {
        transition: transform .07s linear;
        position: absolute;
        pointer-events: none;
      }
      .cursor > img {
        position: absolute;
      }
      .cursor > span {
        position: absolute;
        color: #FFF;
        text-shadow: 1px 1px 1px #000;
        font-family: Arial;
      }
      
      #xy-display {
        position: absolute;
        left: 0;
        top: 0;
        font-size: 16px;
        background-color: rgba(0, 0, 0, 0.5);
        color: #FFF;
        font-family: Arial;
      }
      
      #tool-select {
        position: absolute;
        top: 20px;
        left: 5px;
        width: 50px;
      }
      #tool-select > button {
        display: inline-block;
        width: 50px;
        height: 50px;
      }
      #tool-select > button.selected {
        background-color: #aaa;
      }
      #tool-select > button > img {
        
      }
      
      #palette {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 44px;
        height: 40px;
        background-color: #DDD;
        border: 1px solid #888;
        box-sizing: border-box;
        pointer-events: none;
      }
      #palette-create {
        position: absolute;
        right: 50px;
        top: 50%;
        transform: translateY(-50%);
        width: 24px;
        height: 24px;
        background-color: #888;
        border: 1px solid #777;
        box-sizing: border-box;
        pointer-events: all;
        cursor: pointer;
      }
      .plus {
        position: relative;
        width: 100%;
        height: 100%;
      }
      .plus:after {
        position: absolute;
        background-color: #FFF;
        width: 16px;
        height: 4px;
        border-radius: 2px;
        top: 9px;
        left: 3px;
        content: "";
      }
      .plus:before {
        position: absolute;
        background-color: #FFF;
        width: 4px;
        height: 16px;
        border-radius: 2px;
        top: 3px;
        left: 9px;
        content: "";
      }
      #palette-colors {
        position: absolute;
        left: 4px;
        top: -5px;
        transition: transform 0.4s ease-out;
      }
      #palette-colors > div {
        width: 32px;
        height: 32px;
        margin: 8px 0;
        border: 1px solid rgba(0, 0, 0, 0.3);
        box-sizing: border-box;
        pointer-events: all;
        cursor: pointer;
      }
      
      #chat {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 400px;
        height: 40%;
        display: flex;
        flex-direction: column;
        pointer-events: none;
      }
      #chat.active {
        background-color: rgba(0, 0, 0, 0.6);
        pointer-events: all;
      }
      #chat-messages {
        flex: 1;
        margin: 0;
        padding: 0;
        font-family: monospace;
        font-size: 14px;
        color: #FFF;
        text-shadow: 1px 1px 1px #000;
        overflow-y: auto;
        vertical-align: bottom;
      }
      #chat-input {
        flex: 0;
        pointer-events: all;
      }
    </style>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="networking.js"></script>
    <script type="text/javascript" src="player.js"></script>
    <script type="text/javascript" src="fx.js"></script>
  </head>
  <body>
    <div id="viewport" onmousedown="document.getElementById('chat').className='';">
      <div id="chunks"></div>
      <div id="fx"></div>
      <div id="cursors"></div>
    </div>
    <span id="xy-display"></span>
    <div id="tool-select"></div>
    <div id="palette">
      <div id="palette-create" onclick="var color=document.createElement('input');color.oninput=function(){var value=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(this.value);WorldOfPixels.addPaletteColor([parseInt(value[1], 16), parseInt(value[2], 16), parseInt(value[3], 16)])};color.type='color';color.click();">
        <div class="plus"></div>
      </div>
      <div id="palette-colors"></div>
    </div>
    <div id="chat">
      <ul id="chat-messages"></ul>
      <input id="chat-input" type="text" placeholder="Chat here" onfocus="this.parentNode.className='active';" onkeyup="if(event.keyCode==13){this.blur();WorldOfPixels.net.sendMessage(this.value);this.value='';this.parentElement.className='';event.stopPropagation();}">
    </div>
  </body>
</html>
